<%= form_with model: book, local:true do |f| %>
  <div class="form-group">
    <%= f.label :title %>
    <%= f.text_field :title, class: 'form-control book_title' %>
  </div>
  <div class="form-group">
    <%= f.label :opinion %>
    <%= f.text_area :body, class: 'form-control book_body' %>
  </div>
  <div class="form-group">
    <%= f.label :tag_list, "タグ" %>
    <%= f.text_field :tag_list, class: "form-control", placeholder: "タグをカンマで区切って入力" %>
  </div>
  <div id="post_raty" class="form-group">
    <%= f.hidden_field :score, id: "book_score" %>
  </div>
  <div class="form-group">
    <%= f.submit class: 'btn btn-success' %>
  </div>
<% end %>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let elem = document.querySelector('#post_raty');
    let opt = {  
      scoreName: 'book[score]', // hidden_fieldに評価点を渡す
      starOn: "<%= asset_path('star_images/star-on.png') %>",
      starOff: "<%= asset_path('star_images/star-off.png') %>",
      starHalf: "<%= asset_path('star_images/star-half.png') %>",
      score: 0 // 初期スコアを0に設定
    };
    raty(elem, opt);
  });
</script>
